<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="x-apple-disable-message-reformatting">
  <title>Subscribe ‚Äî Duty Roster</title>

  <!-- favicon -->
  <link rel="icon" href="/roster-site/favicon.ico">

  <style>
    body{margin:0;background:#eef1f7;font-family:'Segoe UI',system-ui,-apple-system,BlinkMacSystemFont,Roboto,Helvetica,Arial,sans-serif;color:#0f172a;-webkit-font-smoothing:antialiased;}
    *{box-sizing:border-box;}
    .wrap{max-width:680px;margin:0 auto;padding:16px 14px 28px;}
    .header{background:linear-gradient(135deg,#1e40af 0%,#1976d2 50%,#0ea5e9 100%);color:#fff;padding:24px 18px 18px;border-radius:20px;text-align:center;box-shadow:0 8px 28px rgba(30,64,175,.25);position:relative;overflow:hidden;}
    .header:before{content:'';position:absolute;top:-30px;right:-40px;width:140px;height:140px;border-radius:50%;background:rgba(255,255,255,.08);}
    .header:after{content:'';position:absolute;bottom:-50px;left:-30px;width:160px;height:160px;border-radius:50%;background:rgba(255,255,255,.06);}
    .header h1{margin:0;font-size:24px;font-weight:900;letter-spacing:-.3px;position:relative;z-index:1;}
    .header p{margin:10px 0 0;font-size:14px;opacity:.92;line-height:1.6;position:relative;z-index:1;}
    .topBar{margin-top:12px;display:flex;gap:10px;justify-content:space-between;align-items:center;flex-wrap:wrap;position:relative;z-index:1;}
    .miniBtn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:8px 12px;border-radius:14px;background:rgba(255,255,255,.18);border:1px solid rgba(255,255,255,.25);color:#fff;font-size:12px;font-weight:900;text-decoration:none;cursor:pointer;user-select:none;}
    .card{margin-top:16px;background:#fff;border-radius:18px;border:1px solid rgba(15,23,42,.07);box-shadow:0 4px 18px rgba(15,23,42,.08);overflow:hidden;}
    .cardHead{padding:14px 16px;border-bottom:1px solid rgba(15,23,42,.06);display:flex;justify-content:space-between;align-items:center;}
    .cardTitle{font-size:16px;font-weight:900;letter-spacing:-.2px;}
    .badge{background:#f1f5f9;border:1px solid rgba(15,23,42,.08);color:#475569;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:900;}
    .cardBody{padding:14px 16px;}
    .label{font-size:12px;font-weight:900;color:#64748b;text-transform:uppercase;letter-spacing:.6px;margin-bottom:6px;}
    .input{width:100%;padding:12px 12px;border-radius:12px;border:1px solid rgba(15,23,42,.14);font-size:14px;outline:none;}
    .help{margin-top:10px;font-size:12px;color:#64748b;line-height:1.7;}
    .row{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;}
    .opt{flex:1;min-width:260px;display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:14px;border:1px solid rgba(15,23,42,.10);background:#f8fafc;font-size:13px;font-weight:900;cursor:pointer;user-select:none;}
    .opt input{margin:0;}
    .btn{width:100%;margin-top:14px;padding:14px 16px;border:0;border-radius:16px;background:linear-gradient(135deg,#1e40af,#1976d2);color:#fff;font-weight:900;font-size:15px;cursor:pointer;box-shadow:0 6px 20px rgba(30,64,175,.3);}
    .btn[disabled]{opacity:.7;cursor:not-allowed;}
    .footer{margin-top:18px;text-align:center;font-size:12px;color:#94a3b8;padding:12px 0;line-height:1.9;}

    .msg{
      margin-top:12px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid rgba(15,23,42,.10);
      background:#f8fafc;
      font-size:13px;
      font-weight:800;
      color:#0f172a;
      display:none;
      line-height:1.6;
    }
    .msg.ok{border-color:rgba(5,150,105,.25); background:rgba(5,150,105,.08); color:#065f46;}
    .msg.err{border-color:rgba(220,38,38,.25); background:rgba(220,38,38,.06); color:#991b1b;}

    [dir="rtl"] .cardHead{flex-direction:row-reverse;}
    [dir="rtl"] .opt{flex-direction:row-reverse;}
    [dir="rtl"] .topBar{flex-direction:row-reverse;}

    @media (max-width:520px){
      .wrap{padding:12px 10px 22px;}
      .header h1{font-size:21px;}
      .miniBtn{width:100%;}
      .topBar{gap:8px;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <h1 id="tTitle">üì© Subscribe</h1>
      <p id="tSub">We will send you a confirmation link by email to activate your subscription.</p>
      <div class="topBar">
        <a class="miniBtn" href="../" id="tBack">‚¨ÖÔ∏è Back</a>
        <div class="miniBtn" id="langBtn">AR</div>
      </div>
    </div>

    <div class="card">
      <div class="cardHead">
        <div class="cardTitle" id="tCardTitle">Subscription</div>
        <div class="badge" id="tBadge">Simple</div>
      </div>

      <div class="cardBody">
        <!-- ‚úÖ ÿ±ÿßÿ®ÿ∑ Web App -->
        <script>
          const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxkucdwj4rx578-qHWggGPp8KrRT1a37-x2hgPXND4HuyFQ3xBIN-_fMkGFToRA-TUD/exec";
        </script>

        <!-- iframe ŸÖÿÆŸÅŸä ÿπÿ¥ÿßŸÜ ŸÖÿß ŸäŸÅÿ™ÿ≠ ÿ™ÿ®ŸàŸäÿ® ÿ¨ÿØŸäÿØ -->
        <iframe name="hidden_iframe" style="display:none;"></iframe>

        <form method="POST" target="hidden_iframe" id="subForm">
          <div class="label" id="tEmailLbl">Email</div>
          <input class="input" type="email" name="email" required placeholder="name@example.com" autocomplete="email">

          <input type="hidden" name="lang" id="langField" value="en">

          <div style="height:12px"></div>
          <div class="label" id="tModeLbl">Delivery</div>

          <div class="row">
            <label class="opt">
              <input type="radio" name="mode" value="ALL" checked>
              <span id="tAll">All shifts ‚Äî once daily</span>
            </label>
            <label class="opt">
              <input type="radio" name="mode" value="CURRENT">
              <span id="tCur">Current shift ‚Äî 3√ó daily (each shift once)</span>
            </label>
          </div>

          <button class="btn" type="submit" id="submitBtn">‚úÖ Subscribe</button>

          <div class="help" id="tHelp">
            After you click Subscribe, we will send a confirmation link to your email. Please confirm to activate.
          </div>

          <div class="msg" id="msgBox"></div>
        </form>
      </div>
    </div>

    <div class="footer" id="tFoot">Duty Roster ¬∑ Subscribe</div>
  </div>

  <script>
    // bind action
    const form = document.getElementById('subForm');
    const submitBtn = document.getElementById('submitBtn');
    const msgBox = document.getElementById('msgBox');

    function showMsg(type, text){
      msgBox.className = 'msg ' + (type || '');
      msgBox.textContent = text;
      msgBox.style.display = 'block';
    }

    // ÿ≠ŸÖÿßŸäÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©: ÿ•ÿ∞ÿß ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿ∫ŸÑÿ∑
    if (!WEB_APP_URL || !WEB_APP_URL.startsWith('https://script.google.com/macros/s/')) {
      showMsg('err', 'WEB_APP_URL is not set correctly.');
      submitBtn.disabled = true;
    }

    form.action = WEB_APP_URL;

    let lang = "en";
    const T = {
      en: {
        title:"üì© Subscribe",
        sub:"We will send you a confirmation link by email to activate your subscription.",
        back:"‚¨ÖÔ∏è Back",
        cardTitle:"Subscription",
        badge:"Simple",
        emailLbl:"Email",
        modeLbl:"Delivery",
        all:"All shifts ‚Äî once daily",
        cur:"Current shift ‚Äî 3√ó daily (each shift once)",
        submit:"‚úÖ Subscribe",
        help:"After you click Subscribe, we will send a confirmation link to your email. Please confirm to activate.",
        foot:"Duty Roster ¬∑ Subscribe",
        langBtn:"AR",
        ok:"‚úÖ Request sent! Check your email and click the confirmation link.",
        err:"‚ùå Could not submit. Please try again."
      },
      ar: {
        title:"üì© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",
        sub:"ÿ≥ŸäÿµŸÑŸÉ ÿ®ÿ±ŸäÿØ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä Ÿäÿ≠ÿ™ŸàŸä ÿ±ÿßÿ®ÿ∑Ÿãÿß ŸÑÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ Ÿàÿ™ŸÅÿπŸäŸÑŸá.",
        back:"‚¨ÖÔ∏è ÿ±ÿ¨Ÿàÿπ",
        cardTitle:"ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",
        badge:"ÿ®ÿ≥Ÿäÿ∑",
        emailLbl:"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
        modeLbl:"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ",
        all:"ŸÉŸÑ ÿßŸÑŸÖŸÜÿßŸàÿ®ÿßÿ™ ‚Äî ŸÖÿ±ÿ© ŸäŸàŸÖŸäŸãÿß",
        cur:"ÿßŸÑŸÖŸÜÿßŸàÿ®ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ‚Äî 3 ŸÖÿ±ÿßÿ™ ŸäŸàŸÖŸäŸãÿß (ŸÉŸÑ ŸÖŸÜÿßŸàÿ®ÿ© ŸÖÿ±ÿ©)",
        submit:"‚úÖ ÿßÿ¥ÿ™ÿ±ŸÉ",
        help:"ÿ®ÿπÿØ ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿßÿ¥ÿ™ÿ±ŸÉ ÿ≥ŸÜÿ±ÿ≥ŸÑ ÿ±ÿßÿ®ÿ∑ ÿ™ÿ£ŸÉŸäÿØ ÿ•ŸÑŸâ ÿ®ÿ±ŸäÿØŸÉ. ÿßÿ∂ÿ∫ÿ∑ ÿßŸÑÿ±ÿßÿ®ÿ∑ ŸÑÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ.",
        foot:"Duty Roster ¬∑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ",
        langBtn:"EN",
        ok:"‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®! ÿßŸÅÿ≠ÿµ ÿ®ÿ±ŸäÿØŸÉ Ÿàÿßÿ∂ÿ∫ÿ∑ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ™ÿ£ŸÉŸäÿØ.",
        err:"‚ùå ÿ™ÿπÿ∞ÿ± ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ. ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ."
      }
    };

    function applyLang(){
      const t = T[lang];
      document.documentElement.lang = lang;
      document.documentElement.dir = (lang === "ar") ? "rtl" : "ltr";
      tTitle.textContent = t.title;
      tSub.textContent = t.sub;
      tBack.textContent = t.back;
      tCardTitle.textContent = t.cardTitle;
      tBadge.textContent = t.badge;
      tEmailLbl.textContent = t.emailLbl;
      tModeLbl.textContent = t.modeLbl;
      tAll.textContent = t.all;
      tCur.textContent = t.cur;
      submitBtn.textContent = t.submit;
      tHelp.textContent = t.help;
      tFoot.textContent = t.foot;
      langBtn.textContent = t.langBtn;
      langField.value = lang;
    }

    langBtn.addEventListener('click', ()=>{
      lang = (lang === "ar") ? "en" : "ar";
      applyLang();
    });

    // ÿ±ÿ≥ÿßŸÑÿ© ŸÜÿ¨ÿßÿ≠ ŸÖÿ≠ŸÑŸäÿ© + ÿ™ÿπÿ∑ŸäŸÑ ÿ≤ÿ± ŸÖÿ§ŸÇÿ™Ÿãÿß
    form.addEventListener('submit', () => {
      submitBtn.disabled = true;
      showMsg('ok', T[lang].ok);
      setTimeout(()=>{ submitBtn.disabled = false; }, 2500);
    });

    applyLang();
  </script>
</body>
</html>